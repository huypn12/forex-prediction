function [model, train_options] = lstm_multi_model(numFeatures)


%% Build model for Open price
numFeatures = 4;
numHiddenUnits = 200;
numResponse = 4;
lstmNet = [ ...
    sequenceInputLayer(numFeatures),...
    lstmLayer(numHiddenUnits, 'OutputMode', 'sequence'),...
    lstmLayer(numHiddenUnits, 'OutputMode', 'sequence'),...
    fullyConnectedLayer(numResponses),...
    regressionLayer
    ];

%% Train the model
options = trainingOptions(...
    'adam', ...
    'MaxEpochs', 50, ...
    'GradientThreshold',1, ...
    'InitialLearnRate',0.005, ...
    'LearnRateSchedule','piecewise', ...
    'LearnRateDropPeriod',125, ...
    'LearnRateDropFactor',0.2, ...
    'Verbose',0, ...
    'Plots','training-progress', ...
    'ExecutionEnvironment','multi-gpu'...
    );  

end